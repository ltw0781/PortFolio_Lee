-- Active: 1763393025352@@127.0.0.1@3306@example
DROP TABLE IF EXISTS `file`;

CREATE TABLE `file` (
	`no`	BIGINT	NOT NULL	COMMENT 'PK',
	`id`	VARCHAR(255)	NOT NULL	COMMENT 'UK',
	`file_name`	TEXT	NOT NULL	COMMENT '파일명',
	`file_path`	TEXT	NOT NULL	COMMENT '파일경로',
	`file_size`	BIGINT	NULL	COMMENT '용량',
	`type`	ENUM('main','sub')	NOT NULL	COMMENT '타입',
	`parent_table`	VARCHAR(100)	NOT NULL	COMMENT '부모테이블',
	`parent_no`	BIGINT	NOT NULL	COMMENT '부모PK',
	`created_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '등록일자',
	`updated_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '수정일자'
);

DROP TABLE IF EXISTS `board`;

CREATE TABLE `board` (
	`no`	BIGINT	NOT NULL	COMMENT 'PK',
	`id`	VARCHAR(255)	NOT NULL	COMMENT 'UK',
	`category`	VARCHAR(100)	NOT NULL	COMMENT '카테고리',
	`title`	VARCHAR(255)	NOT NULL	COMMENT '제목',
	`writer`	VARCHAR(100)	NOT NULL	COMMENT '작성자',
	`content`	TEXT	NULL	COMMENT '내용',
	`created_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '등록일자',
	`updated_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '수정일자',
	`view_count`	int	NOT NULL	DEFAULT 0	COMMENT '조회수'
);

DROP TABLE IF EXISTS `comments`;

CREATE TABLE `comments` (
	`no`	BIGINT	NOT NULL	COMMENT 'PK',
	`id`	VARCHAR(255)	NOT NULL	COMMENT 'UK',
	`board_no`	BIGINT	NOT NULL	COMMENT 'PK',
	`writer`	VARCHAR(100)	NOT NULL	COMMENT '작성자',
	`content`	TEXT	NULL	COMMENT '내용',
	`created_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '등록일자',
	`updated_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '수정일자'
);

DROP TABLE IF EXISTS `common`;

CREATE TABLE `common` (
	`no`	BIGINT	NOT NULL	COMMENT 'PK',
	`id`	VARCHAR(255)	NOT NULL	COMMENT 'UK',
	`created_at`	TIMESTAMP	NOT NULL	COMMENT '등록일자',
	`updated_at`	TIMESTAMP	NOT NULL	COMMENT '수정일자'
);

DROP TABLE IF EXISTS `users`;

CREATE TABLE `users` (
	`username`	VARCHAR(100)	NOT NULL	COMMENT '회원아이디',
	`password`	VARCHAR(100)	NOT NULL	COMMENT '비밀번호',
	`name`	VARCHAR(100)	NOT NULL	COMMENT '이름',
	`email`	VARCHAR(200)	NULL	DEFAULT NULL	COMMENT '이메일',
	`phone`	VARCHAR(200)	NULL	DEFAULT NULL	COMMENT '전화번호',
	`address`	VARCHAR(200)	NULL	DEFAULT NULL	COMMENT '주소',
	`created_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '등록일자',
	`updated_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '수정일자',
	`enabled`	INT	NOT NULL	DEFAULT 1	COMMENT '권한상태',
	`status`	INT	NOT NULL	DEFAULT 0	COMMENT '진행상태'
);

DROP TABLE IF EXISTS `user_auth`;

CREATE TABLE `user_auth` (
	`no`	BIGINT	NOT NULL	COMMENT '번호',
	`username`	VARCHAR(100)	NOT NULL	COMMENT '회원아이디',
	`auth`	VARCHAR(255)	NOT NULL	COMMENT '권한'
);

DROP TABLE IF EXISTS `products`;

CREATE TABLE `products` (
	`product_no`	BIGINT	NOT NULL	COMMENT '상품번호',
	`product_name`	VARCHAR(255)	NOT NULL	COMMENT '상품명',
	`description`	TEXT	NULL	COMMENT '상품설명',
	`price`	DECIMAL(10,2)	NOT NULL	COMMENT '상품가격',
	`stock`	INT	NOT NULL	DEFAULT 0	COMMENT '상품재고',
	`product_nm`	VARCHAR(100)	NULL	COMMENT '상품종류',
	`product_img`	VARCHAR(255)	NULL	COMMENT '상품이미지',
	`created_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '등록일자',
	`updated_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '수정일자'
);

DROP TABLE IF EXISTS `payments`;Q

CREATE TABLE `payments` (
	`payment_no`	BIGINT	NOT NULL	COMMENT '결제번호',
	`order_no`	VARCHAR(100)	NOT NULL	COMMENT '주문번호',
	`total_amount`	DECIMAL(10,2)	NOT NULL	COMMENT '총주문금액',
	`payment_method`	VARCHAR(50)	NOT NULL	COMMENT '결제방식',
	`status`	VARCHAR(50)	NOT NULL	COMMENT '상태',
	`created_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '등록일자',
	`Field`	VARCHAR(255)	NULL,
	`username`	VARCHAR(100)	NOT NULL	COMMENT '회원아이디'
);

DROP TABLE IF EXISTS `carts`;

CREATE TABLE `carts` (
	`cart_no`	BIGINT	NOT NULL	COMMENT '장바구니번호',
	`product_no`	BIGINT	NOT NULL	COMMENT '상품번호',
	`quantity`	INT	NOT NULL	DEFAULT 0	COMMENT '수량',
	`created_at`	TIMESTAMP	NOT NULL	DEFAULT CURRENT_TIMESTAMP	COMMENT '등록일자'
);



ALTER TABLE `file` ADD CONSTRAINT `PK_FILE` PRIMARY KEY (
	`no`
);

ALTER TABLE `board` ADD CONSTRAINT `PK_BOARD` PRIMARY KEY (
	`no`
);

ALTER TABLE `comments` ADD CONSTRAINT `PK_COMMENTS` PRIMARY KEY (
	`no`
);

ALTER TABLE `common` ADD CONSTRAINT `PK_COMMON` PRIMARY KEY (
	`no`
);

ALTER TABLE `carts` ADD CONSTRAINT `PK_CARTS` PRIMARY KEY (
	`cart_no`,
	`product_no`
);

ALTER TABLE `payments` ADD CONSTRAINT `PK_PAYMENTS` PRIMARY KEY (
	`payment_no`
);

ALTER TABLE `user_auth` ADD CONSTRAINT `PK_USER_AUTH` PRIMARY KEY (
	`no`,
	`username`
);

ALTER TABLE `users` ADD CONSTRAINT `PK_USERS` PRIMARY KEY (
	`username`
);

ALTER TABLE `products` ADD CONSTRAINT `PK_PRODUCTS` PRIMARY KEY (
	`product_no`
);

ALTER TABLE `carts` ADD CONSTRAINT `FK_products_TO_carts_1` FOREIGN KEY (
	`product_no`
)
REFERENCES `products` (
	`product_no`
);

ALTER TABLE `user_auth` ADD CONSTRAINT `FK_users_TO_user_auth_1` FOREIGN KEY (
	`username`
)
REFERENCES `users` (
	`username`
);

